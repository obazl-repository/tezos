load("@obazl_rules_ocaml//ocaml:rules.bzl",
    "ocaml_archive",
    "ocaml_module",
    "ocaml_ns_archive",
    "ocaml_ns_signature",
    "ocaml_ns_subsignature",
    "ocaml_signature",
)

# package(default_visibility = ["//visibility:public"])

###############################################
########### Archive/Library Targets ###########

######## tezos-protocol-environment-sigs ########
TEZOS_PROTOCOL_ENVIRONMENT_SIGS_OPTS = [
    "-nopervasives",
]

TEZOS_PROTOCOL_ENVIRONMENT_SIGS_DEPS = [
]

ocaml_ns_archive(
    name       = "tezos-protocol-environment-sigs",
    ns         = "tezos_protocol_environment_sigs",
    visibility = ["//visibility:public"],
    submodules = [
        ":V0",
        ":V1",
        ":V2",
        ":V3",
    ],
)

#############################
####  Singleton Targets  ####

ocaml_module(
    name     = "V3",
    struct   = "v3.ml",
    opts     = TEZOS_PROTOCOL_ENVIRONMENT_SIGS_OPTS,
    deps     = TEZOS_PROTOCOL_ENVIRONMENT_SIGS_DEPS + [
    ]
)

ocaml_module(
    name     = "V2",
    struct   = "v2.ml",
    opts     = TEZOS_PROTOCOL_ENVIRONMENT_SIGS_OPTS,
    deps     = TEZOS_PROTOCOL_ENVIRONMENT_SIGS_DEPS + [
    ]
)

ocaml_module(
    name     = "V1",
    struct   = "v1.ml",
    opts     = TEZOS_PROTOCOL_ENVIRONMENT_SIGS_OPTS,
    deps     = TEZOS_PROTOCOL_ENVIRONMENT_SIGS_DEPS + [
    ]
)

ocaml_module(
    name     = "V0",
    struct   = "v0.ml",
    opts     = TEZOS_PROTOCOL_ENVIRONMENT_SIGS_OPTS,
    deps     = TEZOS_PROTOCOL_ENVIRONMENT_SIGS_DEPS + [
    ]
)

# expose cmi files individually so lib_protocol_compiler:__embedded_cmis.ml
# can depend on them
ocaml_ns_signature(
    name = "sigs_cmi",
    ns = ":tezos-protocol-environment-sigs",
    as_cmi = "tezos_protocol_environment_sigs.cmi",
    visibility = ["//visibility:public"],
)

ocaml_ns_subsignature(
    name = "v3_cmi",
    ns = ":tezos-protocol-environment-sigs",
    module = "V3",
    as_cmi = "tezos_protocol_environment_sigs__V3.cmi",
    visibility = ["//visibility:public"],
)

ocaml_ns_subsignature(
    name = "v2_cmi",
    ns = ":tezos-protocol-environment-sigs",
    module = "V2",
    as_cmi = "tezos_protocol_environment_sigs__V2.cmi",
    visibility = ["//visibility:public"],
)

ocaml_ns_subsignature(
    name = "v1_cmi",
    ns = ":tezos-protocol-environment-sigs",
    module = "V1",
    as_cmi = "tezos_protocol_environment_sigs__V1.cmi",
    visibility = ["//visibility:public"],
)

ocaml_ns_subsignature(
    name = "v0_cmi",
    ns = ":tezos-protocol-environment-sigs",
    module = "V0",
    as_cmi = "tezos_protocol_environment_sigs__V0.cmi",
    visibility = ["//visibility:public"],
)

########################
####  Rule Targets  ####

######## with-stdout-to ########
genrule(
    name = "__v0.ml",
    outs  = [
        "v0.ml"
    ],
    tools  = ["//src/lib_protocol_environment/s_packer:s_packer.exe"],
    cmd  = " ".join([
        "$(execpath //src/lib_protocol_environment/s_packer:s_packer.exe) ",
        "sigs",
        "$(location //src/lib_protocol_environment/sigs/v0:pervasives.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:list.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:string.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:int32.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:int64.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:format.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:mBytes.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:z.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:lwt.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:lwt_list.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:raw_hashes.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:compare.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:data_encoding.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:error_monad.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:logging.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:time.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:option.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:RPC_arg.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:RPC_path.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:RPC_query.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:RPC_service.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:RPC_answer.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:RPC_directory.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:base58.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:s.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:set.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:map.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:blake2B.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:ed25519.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:secp256k1.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:p256.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:chain_id.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:signature.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:block_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:operation_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:operation_list_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:operation_list_list_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:protocol_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:context_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:micheline.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:block_header.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:fitness.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:operation.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:protocol.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:context.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:updater.mli)",
        "$(location //src/lib_protocol_environment/sigs/v0:RPC_context.mli)",
        "> $@"
        ]),
    srcs  = [
        "//src/lib_protocol_environment/sigs/v0:pervasives.mli",
        "//src/lib_protocol_environment/sigs/v0:list.mli",
        "//src/lib_protocol_environment/sigs/v0:string.mli",
        "//src/lib_protocol_environment/sigs/v0:int32.mli",
        "//src/lib_protocol_environment/sigs/v0:int64.mli",
        "//src/lib_protocol_environment/sigs/v0:format.mli",
        "//src/lib_protocol_environment/sigs/v0:mBytes.mli",
        "//src/lib_protocol_environment/sigs/v0:z.mli",
        "//src/lib_protocol_environment/sigs/v0:lwt.mli",
        "//src/lib_protocol_environment/sigs/v0:lwt_list.mli",
        "//src/lib_protocol_environment/sigs/v0:raw_hashes.mli",
        "//src/lib_protocol_environment/sigs/v0:compare.mli",
        "//src/lib_protocol_environment/sigs/v0:data_encoding.mli",
        "//src/lib_protocol_environment/sigs/v0:error_monad.mli",
        "//src/lib_protocol_environment/sigs/v0:logging.mli",
        "//src/lib_protocol_environment/sigs/v0:time.mli",
        "//src/lib_protocol_environment/sigs/v0:option.mli",
        "//src/lib_protocol_environment/sigs/v0:RPC_arg.mli",
        "//src/lib_protocol_environment/sigs/v0:RPC_path.mli",
        "//src/lib_protocol_environment/sigs/v0:RPC_query.mli",
        "//src/lib_protocol_environment/sigs/v0:RPC_service.mli",
        "//src/lib_protocol_environment/sigs/v0:RPC_answer.mli",
        "//src/lib_protocol_environment/sigs/v0:RPC_directory.mli",
        "//src/lib_protocol_environment/sigs/v0:base58.mli",
        "//src/lib_protocol_environment/sigs/v0:s.mli",
        "//src/lib_protocol_environment/sigs/v0:set.mli",
        "//src/lib_protocol_environment/sigs/v0:map.mli",
        "//src/lib_protocol_environment/sigs/v0:blake2B.mli",
        "//src/lib_protocol_environment/sigs/v0:ed25519.mli",
        "//src/lib_protocol_environment/sigs/v0:secp256k1.mli",
        "//src/lib_protocol_environment/sigs/v0:p256.mli",
        "//src/lib_protocol_environment/sigs/v0:chain_id.mli",
        "//src/lib_protocol_environment/sigs/v0:signature.mli",
        "//src/lib_protocol_environment/sigs/v0:block_hash.mli",
        "//src/lib_protocol_environment/sigs/v0:operation_hash.mli",
        "//src/lib_protocol_environment/sigs/v0:operation_list_hash.mli",
        "//src/lib_protocol_environment/sigs/v0:operation_list_list_hash.mli",
        "//src/lib_protocol_environment/sigs/v0:protocol_hash.mli",
        "//src/lib_protocol_environment/sigs/v0:context_hash.mli",
        "//src/lib_protocol_environment/sigs/v0:micheline.mli",
        "//src/lib_protocol_environment/sigs/v0:block_header.mli",
        "//src/lib_protocol_environment/sigs/v0:fitness.mli",
        "//src/lib_protocol_environment/sigs/v0:operation.mli",
        "//src/lib_protocol_environment/sigs/v0:protocol.mli",
        "//src/lib_protocol_environment/sigs/v0:context.mli",
        "//src/lib_protocol_environment/sigs/v0:updater.mli",
        "//src/lib_protocol_environment/sigs/v0:RPC_context.mli",
    ],
)
######## with-stdout-to ########
genrule(
    name = "__v1.ml",
    outs  = [
        "v1.ml"
    ],
    tools  = ["//src/lib_protocol_environment/s_packer:s_packer.exe"],
    cmd  = " ".join([
        "$(execpath //src/lib_protocol_environment/s_packer:s_packer.exe) ",
        "sigs",
        "$(location //src/lib_protocol_environment/sigs/v1:pervasives.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:list.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:string.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:char.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:bytes.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:int32.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:int64.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:format.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:hex.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:z.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:lwt.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:lwt_list.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:data_encoding.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:raw_hashes.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:compare.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:error_monad.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:logging.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:time.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:option.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:tzEndian.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:RPC_arg.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:RPC_path.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:RPC_query.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:RPC_service.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:RPC_answer.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:RPC_directory.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:base58.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:s.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:set.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:map.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:blake2B.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:bls12_381.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:ed25519.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:secp256k1.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:p256.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:chain_id.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:signature.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:block_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:operation_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:operation_list_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:operation_list_list_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:protocol_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:context_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:pvss_secp256k1.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:sapling.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:micheline.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:block_header.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:fitness.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:operation.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:protocol.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:context.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:updater.mli)",
        "$(location //src/lib_protocol_environment/sigs/v1:RPC_context.mli)",
        "> $@"
        ]),
    srcs  = [
        "//src/lib_protocol_environment/sigs/v1:pervasives.mli",
        "//src/lib_protocol_environment/sigs/v1:list.mli",
        "//src/lib_protocol_environment/sigs/v1:string.mli",
        "//src/lib_protocol_environment/sigs/v1:char.mli",
        "//src/lib_protocol_environment/sigs/v1:bytes.mli",
        "//src/lib_protocol_environment/sigs/v1:int32.mli",
        "//src/lib_protocol_environment/sigs/v1:int64.mli",
        "//src/lib_protocol_environment/sigs/v1:format.mli",
        "//src/lib_protocol_environment/sigs/v1:hex.mli",
        "//src/lib_protocol_environment/sigs/v1:z.mli",
        "//src/lib_protocol_environment/sigs/v1:lwt.mli",
        "//src/lib_protocol_environment/sigs/v1:lwt_list.mli",
        "//src/lib_protocol_environment/sigs/v1:data_encoding.mli",
        "//src/lib_protocol_environment/sigs/v1:raw_hashes.mli",
        "//src/lib_protocol_environment/sigs/v1:compare.mli",
        "//src/lib_protocol_environment/sigs/v1:error_monad.mli",
        "//src/lib_protocol_environment/sigs/v1:logging.mli",
        "//src/lib_protocol_environment/sigs/v1:time.mli",
        "//src/lib_protocol_environment/sigs/v1:option.mli",
        "//src/lib_protocol_environment/sigs/v1:tzEndian.mli",
        "//src/lib_protocol_environment/sigs/v1:RPC_arg.mli",
        "//src/lib_protocol_environment/sigs/v1:RPC_path.mli",
        "//src/lib_protocol_environment/sigs/v1:RPC_query.mli",
        "//src/lib_protocol_environment/sigs/v1:RPC_service.mli",
        "//src/lib_protocol_environment/sigs/v1:RPC_answer.mli",
        "//src/lib_protocol_environment/sigs/v1:RPC_directory.mli",
        "//src/lib_protocol_environment/sigs/v1:base58.mli",
        "//src/lib_protocol_environment/sigs/v1:s.mli",
        "//src/lib_protocol_environment/sigs/v1:set.mli",
        "//src/lib_protocol_environment/sigs/v1:map.mli",
        "//src/lib_protocol_environment/sigs/v1:blake2B.mli",
        "//src/lib_protocol_environment/sigs/v1:bls12_381.mli",
        "//src/lib_protocol_environment/sigs/v1:ed25519.mli",
        "//src/lib_protocol_environment/sigs/v1:secp256k1.mli",
        "//src/lib_protocol_environment/sigs/v1:p256.mli",
        "//src/lib_protocol_environment/sigs/v1:chain_id.mli",
        "//src/lib_protocol_environment/sigs/v1:signature.mli",
        "//src/lib_protocol_environment/sigs/v1:block_hash.mli",
        "//src/lib_protocol_environment/sigs/v1:operation_hash.mli",
        "//src/lib_protocol_environment/sigs/v1:operation_list_hash.mli",
        "//src/lib_protocol_environment/sigs/v1:operation_list_list_hash.mli",
        "//src/lib_protocol_environment/sigs/v1:protocol_hash.mli",
        "//src/lib_protocol_environment/sigs/v1:context_hash.mli",
        "//src/lib_protocol_environment/sigs/v1:pvss_secp256k1.mli",
        "//src/lib_protocol_environment/sigs/v1:sapling.mli",
        "//src/lib_protocol_environment/sigs/v1:micheline.mli",
        "//src/lib_protocol_environment/sigs/v1:block_header.mli",
        "//src/lib_protocol_environment/sigs/v1:fitness.mli",
        "//src/lib_protocol_environment/sigs/v1:operation.mli",
        "//src/lib_protocol_environment/sigs/v1:protocol.mli",
        "//src/lib_protocol_environment/sigs/v1:context.mli",
        "//src/lib_protocol_environment/sigs/v1:updater.mli",
        "//src/lib_protocol_environment/sigs/v1:RPC_context.mli",
    ],
)
######## with-stdout-to ########
genrule(
    name = "__v2.ml",
    outs  = [
        "v2.ml"
    ],
    tools  = ["//src/lib_protocol_environment/s_packer:s_packer.exe"],
    cmd  = " ".join([
        "$(execpath //src/lib_protocol_environment/s_packer:s_packer.exe) ",
        "sigs",
        "$(location //src/lib_protocol_environment/sigs/v2:pervasives.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:list.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:string.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:char.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:bytes.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:int32.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:int64.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:format.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:hex.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:z.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:lwt.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:lwt_list.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:data_encoding.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:raw_hashes.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:compare.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:error_monad.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:logging.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:time.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:option.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:tzEndian.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:bits.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:RPC_arg.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:RPC_path.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:RPC_query.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:RPC_service.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:RPC_answer.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:RPC_directory.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:base58.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:s.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:set.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:map.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:blake2B.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:bls12_381.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:ed25519.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:secp256k1.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:p256.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:chain_id.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:signature.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:block_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:operation_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:operation_list_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:operation_list_list_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:protocol_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:context_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:pvss_secp256k1.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:sapling.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:micheline.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:block_header.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:fitness.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:operation.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:protocol.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:context.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:updater.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:RPC_context.mli)",
        "$(location //src/lib_protocol_environment/sigs/v2:equality_witness.mli)",
        "> $@"
        ]),
    srcs  = [
        "//src/lib_protocol_environment/sigs/v2:pervasives.mli",
        "//src/lib_protocol_environment/sigs/v2:list.mli",
        "//src/lib_protocol_environment/sigs/v2:string.mli",
        "//src/lib_protocol_environment/sigs/v2:char.mli",
        "//src/lib_protocol_environment/sigs/v2:bytes.mli",
        "//src/lib_protocol_environment/sigs/v2:int32.mli",
        "//src/lib_protocol_environment/sigs/v2:int64.mli",
        "//src/lib_protocol_environment/sigs/v2:format.mli",
        "//src/lib_protocol_environment/sigs/v2:hex.mli",
        "//src/lib_protocol_environment/sigs/v2:z.mli",
        "//src/lib_protocol_environment/sigs/v2:lwt.mli",
        "//src/lib_protocol_environment/sigs/v2:lwt_list.mli",
        "//src/lib_protocol_environment/sigs/v2:data_encoding.mli",
        "//src/lib_protocol_environment/sigs/v2:raw_hashes.mli",
        "//src/lib_protocol_environment/sigs/v2:compare.mli",
        "//src/lib_protocol_environment/sigs/v2:error_monad.mli",
        "//src/lib_protocol_environment/sigs/v2:logging.mli",
        "//src/lib_protocol_environment/sigs/v2:time.mli",
        "//src/lib_protocol_environment/sigs/v2:option.mli",
        "//src/lib_protocol_environment/sigs/v2:tzEndian.mli",
        "//src/lib_protocol_environment/sigs/v2:bits.mli",
        "//src/lib_protocol_environment/sigs/v2:RPC_arg.mli",
        "//src/lib_protocol_environment/sigs/v2:RPC_path.mli",
        "//src/lib_protocol_environment/sigs/v2:RPC_query.mli",
        "//src/lib_protocol_environment/sigs/v2:RPC_service.mli",
        "//src/lib_protocol_environment/sigs/v2:RPC_answer.mli",
        "//src/lib_protocol_environment/sigs/v2:RPC_directory.mli",
        "//src/lib_protocol_environment/sigs/v2:base58.mli",
        "//src/lib_protocol_environment/sigs/v2:s.mli",
        "//src/lib_protocol_environment/sigs/v2:set.mli",
        "//src/lib_protocol_environment/sigs/v2:map.mli",
        "//src/lib_protocol_environment/sigs/v2:blake2B.mli",
        "//src/lib_protocol_environment/sigs/v2:bls12_381.mli",
        "//src/lib_protocol_environment/sigs/v2:ed25519.mli",
        "//src/lib_protocol_environment/sigs/v2:secp256k1.mli",
        "//src/lib_protocol_environment/sigs/v2:p256.mli",
        "//src/lib_protocol_environment/sigs/v2:chain_id.mli",
        "//src/lib_protocol_environment/sigs/v2:signature.mli",
        "//src/lib_protocol_environment/sigs/v2:block_hash.mli",
        "//src/lib_protocol_environment/sigs/v2:operation_hash.mli",
        "//src/lib_protocol_environment/sigs/v2:operation_list_hash.mli",
        "//src/lib_protocol_environment/sigs/v2:operation_list_list_hash.mli",
        "//src/lib_protocol_environment/sigs/v2:protocol_hash.mli",
        "//src/lib_protocol_environment/sigs/v2:context_hash.mli",
        "//src/lib_protocol_environment/sigs/v2:pvss_secp256k1.mli",
        "//src/lib_protocol_environment/sigs/v2:sapling.mli",
        "//src/lib_protocol_environment/sigs/v2:micheline.mli",
        "//src/lib_protocol_environment/sigs/v2:block_header.mli",
        "//src/lib_protocol_environment/sigs/v2:fitness.mli",
        "//src/lib_protocol_environment/sigs/v2:operation.mli",
        "//src/lib_protocol_environment/sigs/v2:protocol.mli",
        "//src/lib_protocol_environment/sigs/v2:context.mli",
        "//src/lib_protocol_environment/sigs/v2:updater.mli",
        "//src/lib_protocol_environment/sigs/v2:RPC_context.mli",
        "//src/lib_protocol_environment/sigs/v2:equality_witness.mli",
    ],
)
######## with-stdout-to ########
genrule(
    name = "__v3.ml",
    outs  = [
        "v3.ml"
    ],
    tools  = ["//src/lib_protocol_environment/s_packer:s_packer.exe"],
    cmd  = " ".join([
        "$(execpath //src/lib_protocol_environment/s_packer:s_packer.exe) ",
        "sigs",
        "$(location //src/lib_protocol_environment/sigs/v3:pervasives.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:list.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:string.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:char.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:bytes.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:int32.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:int64.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:format.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:hex.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:z.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:lwt.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:lwt_list.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:data_encoding.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:raw_hashes.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:compare.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:error_monad.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:time.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:option.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:tzEndian.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:bits.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:RPC_arg.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:RPC_path.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:RPC_query.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:RPC_service.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:RPC_answer.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:RPC_directory.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:base58.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:s.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:set.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:map.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:blake2B.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:bls12_381.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:ed25519.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:secp256k1.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:p256.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:chain_id.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:signature.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:block_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:operation_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:operation_list_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:operation_list_list_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:protocol_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:context_hash.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:pvss_secp256k1.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:sapling.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:timelock.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:micheline.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:block_header.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:fitness.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:operation.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:protocol.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:context.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:updater.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:RPC_context.mli)",
        "$(location //src/lib_protocol_environment/sigs/v3:equality_witness.mli)",
        "> $@"
        ]),
    srcs  = [
        "//src/lib_protocol_environment/sigs/v3:pervasives.mli",
        "//src/lib_protocol_environment/sigs/v3:list.mli",
        "//src/lib_protocol_environment/sigs/v3:string.mli",
        "//src/lib_protocol_environment/sigs/v3:char.mli",
        "//src/lib_protocol_environment/sigs/v3:bytes.mli",
        "//src/lib_protocol_environment/sigs/v3:int32.mli",
        "//src/lib_protocol_environment/sigs/v3:int64.mli",
        "//src/lib_protocol_environment/sigs/v3:format.mli",
        "//src/lib_protocol_environment/sigs/v3:hex.mli",
        "//src/lib_protocol_environment/sigs/v3:z.mli",
        "//src/lib_protocol_environment/sigs/v3:lwt.mli",
        "//src/lib_protocol_environment/sigs/v3:lwt_list.mli",
        "//src/lib_protocol_environment/sigs/v3:data_encoding.mli",
        "//src/lib_protocol_environment/sigs/v3:raw_hashes.mli",
        "//src/lib_protocol_environment/sigs/v3:compare.mli",
        "//src/lib_protocol_environment/sigs/v3:error_monad.mli",
        "//src/lib_protocol_environment/sigs/v3:time.mli",
        "//src/lib_protocol_environment/sigs/v3:option.mli",
        "//src/lib_protocol_environment/sigs/v3:tzEndian.mli",
        "//src/lib_protocol_environment/sigs/v3:bits.mli",
        "//src/lib_protocol_environment/sigs/v3:RPC_arg.mli",
        "//src/lib_protocol_environment/sigs/v3:RPC_path.mli",
        "//src/lib_protocol_environment/sigs/v3:RPC_query.mli",
        "//src/lib_protocol_environment/sigs/v3:RPC_service.mli",
        "//src/lib_protocol_environment/sigs/v3:RPC_answer.mli",
        "//src/lib_protocol_environment/sigs/v3:RPC_directory.mli",
        "//src/lib_protocol_environment/sigs/v3:base58.mli",
        "//src/lib_protocol_environment/sigs/v3:s.mli",
        "//src/lib_protocol_environment/sigs/v3:set.mli",
        "//src/lib_protocol_environment/sigs/v3:map.mli",
        "//src/lib_protocol_environment/sigs/v3:blake2B.mli",
        "//src/lib_protocol_environment/sigs/v3:bls12_381.mli",
        "//src/lib_protocol_environment/sigs/v3:ed25519.mli",
        "//src/lib_protocol_environment/sigs/v3:secp256k1.mli",
        "//src/lib_protocol_environment/sigs/v3:p256.mli",
        "//src/lib_protocol_environment/sigs/v3:chain_id.mli",
        "//src/lib_protocol_environment/sigs/v3:signature.mli",
        "//src/lib_protocol_environment/sigs/v3:block_hash.mli",
        "//src/lib_protocol_environment/sigs/v3:operation_hash.mli",
        "//src/lib_protocol_environment/sigs/v3:operation_list_hash.mli",
        "//src/lib_protocol_environment/sigs/v3:operation_list_list_hash.mli",
        "//src/lib_protocol_environment/sigs/v3:protocol_hash.mli",
        "//src/lib_protocol_environment/sigs/v3:context_hash.mli",
        "//src/lib_protocol_environment/sigs/v3:pvss_secp256k1.mli",
        "//src/lib_protocol_environment/sigs/v3:sapling.mli",
        "//src/lib_protocol_environment/sigs/v3:timelock.mli",
        "//src/lib_protocol_environment/sigs/v3:micheline.mli",
        "//src/lib_protocol_environment/sigs/v3:block_header.mli",
        "//src/lib_protocol_environment/sigs/v3:fitness.mli",
        "//src/lib_protocol_environment/sigs/v3:operation.mli",
        "//src/lib_protocol_environment/sigs/v3:protocol.mli",
        "//src/lib_protocol_environment/sigs/v3:context.mli",
        "//src/lib_protocol_environment/sigs/v3:updater.mli",
        "//src/lib_protocol_environment/sigs/v3:RPC_context.mli",
        "//src/lib_protocol_environment/sigs/v3:equality_witness.mli",
    ],
)
