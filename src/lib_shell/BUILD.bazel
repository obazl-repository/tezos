load("@obazl_rules_ocaml//ocaml:rules.bzl", "ocaml_module", "ocaml_ns_library", "ocaml_signature")

ocaml_signature(
    name = "patch_context_sig",
    src = ":patch_context.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "patch_context",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":patch_context_sig",
    struct = ":patch_context.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "clock_drift_sig",
    src = ":clock_drift.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "clock_drift",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":clock_drift_sig",
    struct = ":clock_drift.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "config_directory_sig",
    src = ":config_directory.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "config_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":config_directory_sig",
    struct = ":config_directory.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "node_sig",
    src = ":node.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_validator",
        ":block_validator_process",
        ":chain_directory",
        ":chain_validator",
        ":config_directory",
        ":distributed_db",
        ":distributed_db_message",
        ":injection_directory",
        ":monitor_directory",
        ":node_event",
        ":peer_validator",
        ":prevalidator",
        ":protocol_directory",
        ":stat_directory",
        ":validator",
        ":version_directory",
        ":worker_directory",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "node",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":node_sig",
    struct = ":node.ml",
    deps = [
        ":block_validator",
        ":block_validator_process",
        ":chain_directory",
        ":chain_validator",
        ":config_directory",
        ":distributed_db",
        ":distributed_db_message",
        ":injection_directory",
        ":monitor_directory",
        ":node_event",
        ":peer_validator",
        ":prevalidator",
        ":protocol_directory",
        ":stat_directory",
        ":validator",
        ":version_directory",
        ":worker_directory",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "peer_validator_sig",
    src = ":peer_validator.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_validator",
        ":bootstrap_pipeline",
        ":distributed_db",
        ":worker_logger",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "peer_validator",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":peer_validator_sig",
    struct = ":peer_validator.ml",
    deps = [
        ":block_validator",
        ":bootstrap_pipeline",
        ":distributed_db",
        ":worker_logger",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "protocol_validator_event",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    struct = ":protocol_validator_event.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "monitor_directory_sig",
    src = ":monitor_directory.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":chain_directory",
        ":chain_validator",
        ":distributed_db",
        ":validator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "monitor_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":monitor_directory_sig",
    struct = ":monitor_directory.ml",
    deps = [
        ":chain_directory",
        ":chain_validator",
        ":distributed_db",
        ":validator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "stat_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    struct = ":stat_directory.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "prevalidator_filters_sig",
    src = ":prevalidator_filters.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "prevalidator_filters",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":prevalidator_filters_sig",
    struct = ":prevalidator_filters.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "protocol_directory_sig",
    src = ":protocol_directory.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_validator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "protocol_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":protocol_directory_sig",
    struct = ":protocol_directory.ml",
    deps = [
        ":block_validator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "block_validator_process_sig",
    src = ":block_validator_process.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "block_validator_process",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":block_validator_process_sig",
    struct = ":block_validator_process.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "synchronisation_heuristic_sig",
    src = ":synchronisation_heuristic.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "synchronisation_heuristic",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":synchronisation_heuristic_sig",
    struct = ":synchronisation_heuristic.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "chain_validator_event",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    struct = ":chain_validator_event.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "prevalidator_sig",
    src = ":prevalidator.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":distributed_db",
        ":prevalidation",
        ":prevalidator_filters",
        ":worker_logger",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "prevalidator",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":prevalidator_sig",
    struct = ":prevalidator.ml",
    deps = [
        ":distributed_db",
        ":prevalidation",
        ":prevalidator_filters",
        ":worker_logger",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "bootstrap_pipeline_event",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    struct = ":bootstrap_pipeline_event.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "chain_validator_sig",
    src = ":chain_validator.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_validator",
        ":block_validator_process",
        ":chain_validator_event",
        ":distributed_db",
        ":peer_validator",
        ":prevalidator",
        ":prevalidator_filters",
        ":synchronisation_heuristic",
        ":worker_logger",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "chain_validator",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":chain_validator_sig",
    struct = ":chain_validator.ml",
    deps = [
        ":block_validator",
        ":block_validator_process",
        ":chain_validator_event",
        ":distributed_db",
        ":peer_validator",
        ":prevalidator",
        ":prevalidator_filters",
        ":synchronisation_heuristic",
        ":worker_logger",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "distributed_db_requester_sig",
    src = ":distributed_db_requester.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":distributed_db_event",
        ":distributed_db_message",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "distributed_db_requester",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":distributed_db_requester_sig",
    struct = ":distributed_db_requester.ml",
    deps = [
        ":distributed_db_event",
        ":distributed_db_message",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "chain_directory_sig",
    src = ":chain_directory.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_directory",
        ":chain_validator",
        ":distributed_db",
        ":prevalidator",
        ":validator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "chain_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":chain_directory_sig",
    struct = ":chain_directory.ml",
    deps = [
        ":block_directory",
        ":chain_validator",
        ":distributed_db",
        ":prevalidator",
        ":validator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "consensus_heuristic_sig",
    src = ":consensus_heuristic.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "consensus_heuristic",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":consensus_heuristic_sig",
    struct = ":consensus_heuristic.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "validator_event",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    struct = ":validator_event.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "p2p_reader_sig",
    src = ":p2p_reader.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":clock_drift",
        ":distributed_db_event",
        ":distributed_db_message",
        ":distributed_db_requester",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "p2p_reader",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":p2p_reader_sig",
    struct = ":p2p_reader.ml",
    deps = [
        ":clock_drift",
        ":distributed_db_event",
        ":distributed_db_message",
        ":distributed_db_requester",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "prevalidation_sig",
    src = ":prevalidation.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "prevalidation",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":prevalidation_sig",
    struct = ":prevalidation.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "bootstrap_pipeline_sig",
    src = ":bootstrap_pipeline.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_validator",
        ":bootstrap_pipeline_event",
        ":clock_drift",
        ":distributed_db",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "bootstrap_pipeline",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":bootstrap_pipeline_sig",
    struct = ":bootstrap_pipeline.ml",
    deps = [
        ":block_validator",
        ":bootstrap_pipeline_event",
        ":clock_drift",
        ":distributed_db",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "distributed_db_message_sig",
    src = ":distributed_db_message.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "distributed_db_message",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":distributed_db_message_sig",
    struct = ":distributed_db_message.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "worker_logger_sig",
    src = ":worker_logger.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "worker_logger",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":worker_logger_sig",
    struct = ":worker_logger.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "distributed_db_sig",
    src = ":distributed_db.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":distributed_db_message",
        ":distributed_db_requester",
        ":p2p_reader",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "distributed_db",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":distributed_db_sig",
    struct = ":distributed_db.ml",
    deps = [
        ":distributed_db_message",
        ":distributed_db_requester",
        ":p2p_reader",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "distributed_db_event",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    struct = ":distributed_db_event.ml",
    deps = [
        ":distributed_db_message",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "worker_directory_sig",
    src = ":worker_directory.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_validator",
        ":chain_directory",
        ":chain_validator",
        ":peer_validator",
        ":prevalidator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "worker_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":worker_directory_sig",
    struct = ":worker_directory.ml",
    deps = [
        ":block_validator",
        ":chain_directory",
        ":chain_validator",
        ":peer_validator",
        ":prevalidator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "block_validator_sig",
    src = ":block_validator.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_validator_process",
        ":distributed_db",
        ":protocol_validator",
        ":worker_logger",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "block_validator",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":block_validator_sig",
    struct = ":block_validator.ml",
    deps = [
        ":block_validator_process",
        ":distributed_db",
        ":protocol_validator",
        ":worker_logger",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "protocol_validator_sig",
    src = ":protocol_validator.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":distributed_db",
        ":protocol_validator_event",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "protocol_validator",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":protocol_validator_sig",
    struct = ":protocol_validator.ml",
    deps = [
        ":distributed_db",
        ":protocol_validator_event",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "block_directory_sig",
    src = ":block_directory.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":prevalidation",
        ":prevalidator_filters",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "block_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":block_directory_sig",
    struct = ":block_directory.ml",
    deps = [
        ":prevalidation",
        ":prevalidator_filters",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "validator_sig",
    src = ":validator.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":block_validator",
        ":chain_validator",
        ":clock_drift",
        ":distributed_db",
        ":peer_validator",
        ":prevalidator",
        ":validator_event",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "validator",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":validator_sig",
    struct = ":validator.ml",
    deps = [
        ":block_validator",
        ":chain_validator",
        ":clock_drift",
        ":distributed_db",
        ":peer_validator",
        ":prevalidator",
        ":validator_event",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "node_event",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    struct = ":node_event.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "version_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    struct = ":version_directory.ml",
    deps = [
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_signature(
    name = "injection_directory_sig",
    src = ":injection_directory.mli",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    deps = [
        ":chain_directory",
        ":distributed_db",
        ":validator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

ocaml_module(
    name = "injection_directory",
    deps_opam = [
        "lwt-watcher",
        "lwt-canceler",
        "lwt-exit",
    ],
    opts = [
        "-open",
        "Tezos_base__TzPervasives",
        "-open",
        "Tezos_base",
        "-open",
        "Tezos_context",
        "-open",
        "Tezos_store",
        "-open",
        "Tezos_shell_context",
        "-open",
        "Tezos_p2p",
        "-open",
        "Tezos_stdlib_unix",
        "-open",
        "Tezos_shell_services",
        "-open",
        "Tezos_p2p_services",
        "-open",
        "Tezos_protocol_updater",
        "-open",
        "Tezos_requester",
        "-open",
        "Tezos_workers",
        "-open",
        "Tezos_validation",
        "-open",
        "Tezos_version",
    ],
    sig = ":injection_directory_sig",
    struct = ":injection_directory.ml",
    deps = [
        ":chain_directory",
        ":distributed_db",
        ":validator",
        "@tezos//src/lib_base:#Tezos_base",
        "@tezos//src/lib_context:#Tezos_context",
        "@tezos//src/lib_p2p:#Tezos_p2p",
        "@tezos//src/lib_p2p_services:#Tezos_p2p_services",
        "@tezos//src/lib_protocol_environment:#Tezos_shell_context",
        "@tezos//src/lib_protocol_updater:#Tezos_protocol_updater",
        "@tezos//src/lib_requester:#Tezos_requester",
        "@tezos//src/lib_shell_services:#Tezos_shell_services",
        "@tezos//src/lib_stdlib_unix:#Tezos_stdlib_unix",
        "@tezos//src/lib_store:#Tezos_store",
        "@tezos//src/lib_validation:#Tezos_validation",
        "@tezos//src/lib_version:#Tezos_version",
        "@tezos//src/lib_workers:#Tezos_workers",
    ],
)

# okapi:auto
ocaml_ns_library(
    name = "#Tezos_shell",
    submodules = [
        ":block_directory",
        ":block_validator",
        ":block_validator_process",
        ":bootstrap_pipeline",
        ":bootstrap_pipeline_event",
        ":chain_directory",
        ":chain_validator",
        ":chain_validator_event",
        ":clock_drift",
        ":config_directory",
        ":consensus_heuristic",
        ":distributed_db",
        ":distributed_db_event",
        ":distributed_db_message",
        ":distributed_db_requester",
        ":injection_directory",
        ":monitor_directory",
        ":node",
        ":node_event",
        ":p2p_reader",
        ":patch_context",
        ":peer_validator",
        ":prevalidation",
        ":prevalidator",
        ":prevalidator_filters",
        ":protocol_directory",
        ":protocol_validator",
        ":protocol_validator_event",
        ":stat_directory",
        ":synchronisation_heuristic",
        ":validator",
        ":validator_event",
        ":version_directory",
        ":worker_directory",
        ":worker_logger",
    ],
    visibility = ["//visibility:public"],
)
