load("@obazl_rules_ocaml//ocaml:rules.bzl", "ppx_executable", "ppx_module")

ppx_executable(
    name = "ppx_test",
    deps_opam = ["js_of_ocaml-ppx"],
    main = "@obazl_rules_ocaml//dsl:ppx_driver",
)

ppx_module(
    name = "test",
    deps_opam = [
        "tezos-hacl-glue-js",
        "zarith_stubs_js",
        "js_of_ocaml-compiler",
        "js_of_ocaml",
        "js_of_ocaml-ppx",
    ],
    ppx = ":ppx_test",
    ppx_print = "@ppx//print:text",
    struct = ":test.ml",
)

# okapi:auto
# okapi:public_name test
ppx_executable(
    name = "test",
    main = "test",
    visibility = ["//visibility:public"],
)
